{% extends "base.html" %}
{% block content %}
<h2>Admin Dashboard - Pending Items</h2>

{% if pending %}
  <div class="grid">
    {% for item in pending %}
      <div class="card">
        {% if item.image %}
          <img src="{{ url_for('static', filename='uploads/' + item.image) }}" alt="{{ item.title }}">
        {% endif %}

        <h3>{{ item.title }}</h3>

        {% if item.status %}
          <span class="badge" style="
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            {% if item.status.lower() == 'lost' %}background:#f44336;color:#fff;
            {% elif item.status.lower() == 'found' %}background:#4caf50;color:#fff;
            {% endif %}
          ">
            {{ item.status }}
          </span>
        {% endif %}

        {% if item.location %}
          <p><strong>Location:</strong> {{ item.location }}</p>
        {% endif %}
        {% if item.contact %}
          <p><strong>Contact:</strong> {{ item.contact }}</p>
        {% endif %}

        <div style="margin-top: 10px;">
          <a class="btn" href="{{ url_for('approve', item_id=item.id) }}">Approve</a>

          {% if item.image %}
            <button class="btn" onclick="document.getElementById('imgModal{{ item.id }}').style.display='block';">
              Preview
            </button>

            <!-- Simple modal -->
            <div id="imgModal{{ item.id }}" class="modal" style="
                display:none;
                position:fixed;
                z-index:1000;
                left:0;
                top:0;
                width:100%;
                height:100%;
                overflow:auto;
                background-color:rgba(0,0,0,0.6);
            " onclick="this.style.display='none';">
              <div style="
                  margin:10% auto;
                  padding:20px;
                  width:90%;
                  max-width:500px;
                  background:#fff;
                  border-radius:6px;
                  text-align:center;
              ">
                <h4>{{ item.title }} Image</h4>
                <img src="{{ url_for('static', filename='uploads/' + item.image) }}" alt="{{ item.title }}" style="max-width:100%; border-radius:4px;">
                <p><small>Click outside image to close</small></p>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No pending items.</p>
{% endif %}
{% endblock %}

