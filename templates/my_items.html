{% extends 'base.html' %}

{% block content %}
<h2 style="margin-bottom:20px;">My Items</h2>

{% if items %}
<div class="grid" style="
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
">
  {% for item in items %}
    <div class="card" style="padding:15px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); transition: all 0.3s ease;">
      
      {% if item.image %}
        <img src="{{ url_for('static', filename='uploads/' + item.image) }}" alt="{{ item.title }}" style="width:100%; height:150px; object-fit:cover; border-radius:6px; margin-bottom:10px;">
      {% else %}
        <img src="{{ url_for('static', filename='placeholder.png') }}" alt="No image" style="width:100%; height:150px; object-fit:cover; border-radius:6px; margin-bottom:10px; filter:grayscale(50%);">
      {% endif %}

      <h3 style="margin:5px 0;">{{ item.title }}</h3>

      {% if item.status %}
        <span class="badge" style="
          display: inline-block;
          padding: 4px 10px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
          {% if item.status.lower() == 'lost' %}background:#f44336;color:#fff;
          {% elif item.status.lower() == 'found' %}background:#4caf50;color:#fff;
          {% endif %}
          margin-bottom:5px;
        ">
          {{ item.status }}
        </span>
      {% endif %}

      {% if not item.approved %}
        <span class="badge" style="background:orange;color:white; font-weight:500; margin-left:5px;">Pending Approval</span>
      {% endif %}

      <p class="muted" style="font-size:0.85em; color:#777; margin-top:5px;">
        Posted on: {{ item.created_at|formatdatetime }}
      </p>

      <div style="margin-top:10px; display:flex; gap:5px; flex-wrap:wrap;">
        <a class="btn" href="{{ url_for('item_detail', item_id=item.id) }}" style="flex:1; text-align:center; padding:6px 10px; background:#007bff; color:white; border-radius:6px; text-decoration:none;">View</a>
        <a class="btn" href="{{ url_for('edit_item', item_id=item.id) }}" style="flex:1; text-align:center; padding:6px 10px; background:#28a745; color:white; border-radius:6px; text-decoration:none;">Edit</a>
        <form action="{{ url_for('delete_item', item_id=item.id) }}" method="POST" style="flex:1; margin:0;">
          <button type="submit" onclick="return confirm('Are you sure you want to delete this item?');" style="width:100%; padding:6px 10px; background:#dc3545; color:white; border:none; border-radius:6px; cursor:pointer;">Delete</button>
        </form>
      </div>
    </div>
  {% endfor %}
</div>
{% else %}
<p>No items found.</p>
{% endif %}

<script>
  // Hover effect for cards
  document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('mouseenter', () => {
          card.style.transform = 'translateY(-3px)';
          card.style.boxShadow = '0 8px 20px rgba(0,0,0,0.15)';
      });
      card.addEventListener('mouseleave', () => {
          card.style.transform = 'translateY(0)';
          card.style.boxShadow = '0 2px 6px rgba(0,0,0,0.1)';
      });
  });
</script>
{% endblock %}

